{
  "swagger": "2.0",
  "info": {
    "title": "upload.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "UploadService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {},
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1DocumentData": {
      "type": "object",
      "properties": {
        "documentType": {
          "type": "string"
        },
        "documentNumber": {
          "type": "string"
        },
        "holderName": {
          "type": "string"
        },
        "issueDate": {
          "type": "string",
          "format": "date-time"
        },
        "expiryDate": {
          "type": "string",
          "format": "date-time"
        },
        "issuingAuthority": {
          "type": "string"
        },
        "extractedFields": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "confidence": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "v1DocumentMetadata": {
      "type": "object",
      "properties": {
        "fileName": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "fileSize": {
          "type": "string",
          "format": "int64"
        },
        "uploadType": {
          "$ref": "#/definitions/v1UploadType"
        },
        "documentType": {
          "type": "string",
          "description": "LICENSE, INSURANCE, REGISTRATION, etc."
        },
        "expiryDate": {
          "type": "string",
          "format": "date-time"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "v1FilterParams": {
      "type": "object",
      "properties": {
        "search": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "isActive": {
          "type": "boolean"
        },
        "sortBy": {
          "type": "string"
        },
        "sortDesc": {
          "type": "boolean"
        },
        "startDate": {
          "type": "string",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "Common filter parameters"
    },
    "v1FuelReceiptData": {
      "type": "object",
      "properties": {
        "stationName": {
          "type": "string"
        },
        "stationBrand": {
          "type": "string"
        },
        "receiptNumber": {
          "type": "string"
        },
        "date": {
          "type": "string"
        },
        "time": {
          "type": "string"
        },
        "fuelType": {
          "type": "string"
        },
        "quantity": {
          "type": "number",
          "format": "double"
        },
        "pricePerLiter": {
          "type": "number",
          "format": "double"
        },
        "totalAmount": {
          "type": "number",
          "format": "double"
        },
        "paymentMethod": {
          "type": "string"
        },
        "vehicleNumber": {
          "type": "string"
        },
        "confidence": {
          "type": "number",
          "format": "double"
        }
      },
      "title": "Structured data from OCR"
    },
    "v1GetUploadsResponse": {
      "type": "object",
      "properties": {
        "uploads": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1Upload"
          }
        },
        "pagination": {
          "$ref": "#/definitions/v1Pagination"
        }
      }
    },
    "v1Location": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "accuracy": {
          "type": "number",
          "format": "double"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "Location message for GPS coordinates"
    },
    "v1OCRResult": {
      "type": "object",
      "properties": {
        "uploadId": {
          "type": "integer",
          "format": "int64"
        },
        "fileName": {
          "type": "string"
        },
        "uploadType": {
          "$ref": "#/definitions/v1UploadType"
        },
        "extractedText": {
          "type": "string"
        },
        "confidence": {
          "type": "number",
          "format": "double"
        },
        "fuelReceiptData": {
          "$ref": "#/definitions/v1FuelReceiptData",
          "title": "Structured data extraction"
        },
        "podData": {
          "$ref": "#/definitions/v1PODData"
        },
        "documentData": {
          "$ref": "#/definitions/v1DocumentData"
        },
        "processedAt": {
          "type": "string",
          "format": "date-time"
        },
        "warnings": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "requiresManualReview": {
          "type": "boolean"
        }
      }
    },
    "v1PODData": {
      "type": "object",
      "properties": {
        "customerName": {
          "type": "string"
        },
        "signatureExtracted": {
          "type": "string",
          "title": "Base64 signature if detected"
        },
        "deliveryPhotos": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "deliveryNotes": {
          "type": "string"
        },
        "deliveredAt": {
          "type": "string",
          "format": "date-time"
        },
        "receiverName": {
          "type": "string"
        },
        "receiverPhone": {
          "type": "string"
        },
        "gpsLocation": {
          "$ref": "#/definitions/v1Location"
        }
      }
    },
    "v1PODMetadata": {
      "type": "object",
      "properties": {
        "fileName": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "fileSize": {
          "type": "string",
          "format": "int64"
        },
        "tripId": {
          "type": "integer",
          "format": "int64"
        },
        "customerName": {
          "type": "string"
        },
        "deliveryNotes": {
          "type": "string"
        },
        "deliveryLocation": {
          "$ref": "#/definitions/v1Location"
        },
        "deliveredAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1Pagination": {
      "type": "object",
      "properties": {
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        },
        "total": {
          "type": "integer",
          "format": "int32"
        },
        "totalPages": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "Pagination for list requests"
    },
    "v1ProcessingStatus": {
      "type": "object",
      "properties": {
        "uploadId": {
          "type": "integer",
          "format": "int64"
        },
        "status": {
          "$ref": "#/definitions/v1UploadStatus"
        },
        "progressPercentage": {
          "type": "number",
          "format": "double"
        },
        "currentStep": {
          "type": "string"
        },
        "estimatedCompletion": {
          "type": "string"
        },
        "processingSteps": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "errorMessage": {
          "type": "string"
        }
      }
    },
    "v1SuccessResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "success": {
          "type": "boolean"
        }
      },
      "title": "Success response for operations"
    },
    "v1Upload": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "fileName": {
          "type": "string"
        },
        "originalName": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "fileSize": {
          "type": "string",
          "format": "int64"
        },
        "filePath": {
          "type": "string"
        },
        "publicUrl": {
          "type": "string"
        },
        "uploadType": {
          "$ref": "#/definitions/v1UploadType"
        },
        "status": {
          "$ref": "#/definitions/v1UploadStatus"
        },
        "fileHash": {
          "type": "string",
          "title": "File metadata"
        },
        "thumbnailUrl": {
          "type": "string"
        },
        "processedAt": {
          "type": "string",
          "format": "date-time",
          "title": "Processing info"
        },
        "processingLogs": {
          "type": "string"
        },
        "errorMessage": {
          "type": "string"
        },
        "extractedText": {
          "type": "string",
          "title": "OCR/Analysis results"
        },
        "analysisResult": {
          "type": "string",
          "title": "JSON blob"
        },
        "confidence": {
          "type": "number",
          "format": "double"
        },
        "isVerified": {
          "type": "boolean",
          "title": "Verification"
        },
        "verifiedBy": {
          "type": "integer",
          "format": "int64"
        },
        "verifiedAt": {
          "type": "string",
          "format": "date-time"
        },
        "verificationNotes": {
          "type": "string"
        },
        "description": {
          "type": "string",
          "title": "Metadata"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "title": "Timestamps"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "tripId": {
          "type": "integer",
          "format": "int64",
          "title": "Associations"
        },
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "fuelEventId": {
          "type": "integer",
          "format": "int64"
        },
        "uploadedBy": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "Messages"
    },
    "v1UploadMetadata": {
      "type": "object",
      "properties": {
        "fileName": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "fileSize": {
          "type": "string",
          "format": "int64"
        },
        "uploadType": {
          "$ref": "#/definitions/v1UploadType"
        },
        "description": {
          "type": "string"
        },
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "fuelEventId": {
          "type": "integer",
          "format": "int64"
        },
        "location": {
          "$ref": "#/definitions/v1Location"
        }
      }
    },
    "v1UploadProgress": {
      "type": "object",
      "properties": {
        "uploadId": {
          "type": "integer",
          "format": "int64"
        },
        "fileName": {
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/v1UploadStatus"
        },
        "progressPercentage": {
          "type": "number",
          "format": "double"
        },
        "currentStep": {
          "type": "string"
        },
        "bytesProcessed": {
          "type": "string",
          "format": "int64"
        },
        "totalBytes": {
          "type": "string",
          "format": "int64"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "errorMessage": {
          "type": "string"
        }
      }
    },
    "v1UploadResponse": {
      "type": "object",
      "properties": {
        "upload": {
          "$ref": "#/definitions/v1Upload"
        },
        "uploadUrl": {
          "type": "string"
        },
        "success": {
          "type": "boolean"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "v1UploadStatus": {
      "type": "string",
      "enum": [
        "UPLOAD_STATUS_UNSPECIFIED",
        "UPLOAD_STATUS_PENDING",
        "UPLOAD_STATUS_PROCESSING",
        "UPLOAD_STATUS_PROCESSED",
        "UPLOAD_STATUS_FAILED",
        "UPLOAD_STATUS_REJECTED"
      ],
      "default": "UPLOAD_STATUS_UNSPECIFIED",
      "title": "Upload status"
    },
    "v1UploadType": {
      "type": "string",
      "enum": [
        "UPLOAD_TYPE_UNSPECIFIED",
        "UPLOAD_TYPE_FUEL_RECEIPT",
        "UPLOAD_TYPE_POD",
        "UPLOAD_TYPE_SIGNATURE",
        "UPLOAD_TYPE_VEHICLE_PHOTO",
        "UPLOAD_TYPE_DRIVER_DOCUMENT",
        "UPLOAD_TYPE_COMPLIANCE",
        "UPLOAD_TYPE_INCIDENT",
        "UPLOAD_TYPE_OTHER"
      ],
      "default": "UPLOAD_TYPE_UNSPECIFIED",
      "title": "Upload types"
    }
  }
}
