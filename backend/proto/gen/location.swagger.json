{
  "swagger": "2.0",
  "info": {
    "title": "location.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "LocationService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {},
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1AlertSeverity": {
      "type": "string",
      "enum": [
        "ALERT_SEVERITY_UNSPECIFIED",
        "ALERT_SEVERITY_LOW",
        "ALERT_SEVERITY_MEDIUM",
        "ALERT_SEVERITY_HIGH",
        "ALERT_SEVERITY_CRITICAL"
      ],
      "default": "ALERT_SEVERITY_UNSPECIFIED"
    },
    "v1DriverLocationResponse": {
      "type": "object",
      "properties": {
        "latestPing": {
          "$ref": "#/definitions/v1LocationPing"
        },
        "status": {
          "$ref": "#/definitions/v1DriverStatus"
        },
        "currentVehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "vehiclePlate": {
          "type": "string"
        },
        "currentTripId": {
          "type": "integer",
          "format": "int64"
        },
        "lastUpdate": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1DriverStatus": {
      "type": "string",
      "enum": [
        "DRIVER_STATUS_UNSPECIFIED",
        "DRIVER_STATUS_AVAILABLE",
        "DRIVER_STATUS_ON_TRIP",
        "DRIVER_STATUS_ON_BREAK",
        "DRIVER_STATUS_OFFLINE",
        "DRIVER_STATUS_MAINTENANCE"
      ],
      "default": "DRIVER_STATUS_UNSPECIFIED"
    },
    "v1FleetLocationUpdate": {
      "type": "object",
      "properties": {
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "licensePlate": {
          "type": "string"
        },
        "location": {
          "$ref": "#/definitions/v1Location"
        },
        "status": {
          "$ref": "#/definitions/v1VehicleStatus"
        },
        "speed": {
          "type": "number",
          "format": "double"
        },
        "heading": {
          "type": "number",
          "format": "double"
        },
        "currentDriverId": {
          "type": "integer",
          "format": "int64"
        },
        "driverName": {
          "type": "string"
        },
        "driverStatus": {
          "$ref": "#/definitions/v1DriverStatus"
        },
        "currentTripId": {
          "type": "integer",
          "format": "int64"
        },
        "tripStatus": {
          "$ref": "#/definitions/v1TripStatus"
        },
        "fuelLevel": {
          "type": "number",
          "format": "double"
        },
        "lastUpdate": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1GPSBroadcast": {
      "type": "object",
      "properties": {
        "vehicles": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1FleetLocationUpdate"
          }
        },
        "geofenceAlerts": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1GeofenceAlert"
          }
        },
        "routeDeviations": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1RouteDeviation"
          }
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1Geofence": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/v1GeofenceType"
        },
        "centerLatitude": {
          "type": "number",
          "format": "double",
          "title": "For circular geofences"
        },
        "centerLongitude": {
          "type": "number",
          "format": "double"
        },
        "radius": {
          "type": "number",
          "format": "double",
          "title": "meters"
        },
        "polygonPoints": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1Location"
          },
          "title": "For polygon geofences"
        },
        "isActive": {
          "type": "boolean"
        },
        "alertOnEnter": {
          "type": "boolean"
        },
        "alertOnExit": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "Geofence management"
    },
    "v1GeofenceAlert": {
      "type": "object",
      "properties": {
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "licensePlate": {
          "type": "string"
        },
        "geofenceId": {
          "type": "integer",
          "format": "int64"
        },
        "geofenceName": {
          "type": "string"
        },
        "eventType": {
          "$ref": "#/definitions/v1GeofenceEventType"
        },
        "location": {
          "$ref": "#/definitions/v1Location"
        },
        "severity": {
          "$ref": "#/definitions/v1AlertSeverity"
        },
        "description": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "driverName": {
          "type": "string"
        },
        "tripId": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "v1GeofenceEventType": {
      "type": "string",
      "enum": [
        "GEOFENCE_EVENT_UNSPECIFIED",
        "GEOFENCE_EVENT_ENTER",
        "GEOFENCE_EVENT_EXIT",
        "GEOFENCE_EVENT_DWELL"
      ],
      "default": "GEOFENCE_EVENT_UNSPECIFIED",
      "title": "- GEOFENCE_EVENT_DWELL: Staying too long"
    },
    "v1GeofenceType": {
      "type": "string",
      "enum": [
        "GEOFENCE_TYPE_UNSPECIFIED",
        "GEOFENCE_TYPE_CIRCLE",
        "GEOFENCE_TYPE_POLYGON",
        "GEOFENCE_TYPE_FUEL_STATION",
        "GEOFENCE_TYPE_CUSTOMER_LOCATION",
        "GEOFENCE_TYPE_DEPOT",
        "GEOFENCE_TYPE_RESTRICTED_AREA"
      ],
      "default": "GEOFENCE_TYPE_UNSPECIFIED",
      "title": "Geofence types"
    },
    "v1GetGeofencesResponse": {
      "type": "object",
      "properties": {
        "geofences": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1Geofence"
          }
        },
        "pagination": {
          "$ref": "#/definitions/v1Pagination"
        }
      }
    },
    "v1GetLocationHistoryResponse": {
      "type": "object",
      "properties": {
        "pings": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1LocationPing"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "v1Location": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "accuracy": {
          "type": "number",
          "format": "double"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "Location message for GPS coordinates"
    },
    "v1LocationEvent": {
      "type": "object",
      "properties": {
        "eventId": {
          "type": "string"
        },
        "eventType": {
          "type": "string",
          "title": "GPS_UPDATE, GEOFENCE_VIOLATION, ROUTE_DEVIATION, SPEED_VIOLATION, PANIC_BUTTON"
        },
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "licensePlate": {
          "type": "string"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "driverName": {
          "type": "string"
        },
        "location": {
          "$ref": "#/definitions/v1Location"
        },
        "severity": {
          "$ref": "#/definitions/v1AlertSeverity"
        },
        "description": {
          "type": "string"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "geofenceData": {
          "$ref": "#/definitions/v1GeofenceAlert",
          "title": "Event-specific data"
        },
        "routeDeviationData": {
          "$ref": "#/definitions/v1RouteDeviation"
        },
        "speedViolationData": {
          "$ref": "#/definitions/v1SpeedViolation"
        }
      }
    },
    "v1LocationPing": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "accuracy": {
          "type": "number",
          "format": "double"
        },
        "speed": {
          "type": "number",
          "format": "double"
        },
        "heading": {
          "type": "number",
          "format": "double"
        },
        "altitude": {
          "type": "number",
          "format": "double"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "tripId": {
          "type": "integer",
          "format": "int64"
        },
        "source": {
          "type": "string",
          "title": "MOBILE, GPS_DEVICE, MANUAL"
        },
        "batteryLevel": {
          "type": "integer",
          "format": "int64"
        },
        "networkType": {
          "type": "string",
          "title": "2G, 3G, 4G, WIFI"
        }
      },
      "title": "Messages"
    },
    "v1Pagination": {
      "type": "object",
      "properties": {
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        },
        "total": {
          "type": "integer",
          "format": "int32"
        },
        "totalPages": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "Pagination for list requests"
    },
    "v1RouteDeviation": {
      "type": "object",
      "properties": {
        "tripId": {
          "type": "integer",
          "format": "int64"
        },
        "trackingId": {
          "type": "string"
        },
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "licensePlate": {
          "type": "string"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "driverName": {
          "type": "string"
        },
        "deviationDistance": {
          "type": "number",
          "format": "double",
          "title": "meters"
        },
        "deviationDuration": {
          "type": "integer",
          "format": "int64",
          "title": "minutes"
        },
        "deviationStart": {
          "$ref": "#/definitions/v1Location"
        },
        "currentLocation": {
          "$ref": "#/definitions/v1Location"
        },
        "reason": {
          "type": "string",
          "title": "FUEL_STOP, TRAFFIC, EMERGENCY, UNKNOWN"
        },
        "severity": {
          "$ref": "#/definitions/v1AlertSeverity"
        },
        "startTime": {
          "type": "string",
          "format": "date-time"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1SpeedViolation": {
      "type": "object",
      "properties": {
        "vehicleId": {
          "type": "integer",
          "format": "int64"
        },
        "driverId": {
          "type": "integer",
          "format": "int64"
        },
        "currentSpeed": {
          "type": "number",
          "format": "double"
        },
        "speedLimit": {
          "type": "number",
          "format": "double"
        },
        "violationAmount": {
          "type": "number",
          "format": "double"
        },
        "location": {
          "$ref": "#/definitions/v1Location"
        },
        "durationSeconds": {
          "type": "integer",
          "format": "int64"
        },
        "startTime": {
          "type": "string",
          "format": "date-time"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1SuccessResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "success": {
          "type": "boolean"
        }
      },
      "title": "Success response for operations"
    },
    "v1TripStatus": {
      "type": "string",
      "enum": [
        "TRIP_STATUS_UNSPECIFIED",
        "TRIP_STATUS_SCHEDULED",
        "TRIP_STATUS_ASSIGNED",
        "TRIP_STATUS_IN_PROGRESS",
        "TRIP_STATUS_PAUSED",
        "TRIP_STATUS_COMPLETED",
        "TRIP_STATUS_CANCELLED",
        "TRIP_STATUS_DELAYED"
      ],
      "default": "TRIP_STATUS_UNSPECIFIED"
    },
    "v1VehicleLocationResponse": {
      "type": "object",
      "properties": {
        "latestPing": {
          "$ref": "#/definitions/v1LocationPing"
        },
        "status": {
          "$ref": "#/definitions/v1VehicleStatus"
        },
        "currentDriverId": {
          "type": "integer",
          "format": "int64"
        },
        "driverName": {
          "type": "string"
        },
        "currentTripId": {
          "type": "integer",
          "format": "int64"
        },
        "lastUpdate": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "v1VehicleStatus": {
      "type": "string",
      "enum": [
        "VEHICLE_STATUS_UNSPECIFIED",
        "VEHICLE_STATUS_ACTIVE",
        "VEHICLE_STATUS_MAINTENANCE",
        "VEHICLE_STATUS_PARKED",
        "VEHICLE_STATUS_INACTIVE"
      ],
      "default": "VEHICLE_STATUS_UNSPECIFIED"
    }
  }
}
